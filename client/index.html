<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A GitHub management tool for repositories, code, and more">
  <meta name="theme-color" content="#2da44e">
  <title>Gitty-Gitty-Git-Er</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="images/icons/icon-72x72.png">
  <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">
  <!-- Roboto font -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <!-- Material icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
  <header class="app-header">
    <div class="container">
      <h1>Gitty-Gitty-Git-Er</h1>
      <nav id="main-nav">
        <ul class="nav-links">
          <li><a href="#" class="active" data-page="dashboard">Dashboard</a></li>
          <li><a href="#" data-page="repositories">Repositories</a></li>
          <li><a href="#" data-page="code">Code</a></li>
          <li><a href="#" data-page="prs">Pull Requests</a></li>
          <li><a href="#" data-page="settings">Settings</a></li>
        </ul>
      </nav>
      <div class="user-info">
        <div id="user-display" class="hidden">
          <img id="user-avatar" src="" alt="User avatar">
          <span id="user-name"></span>
          <button id="logout-btn" class="btn btn-small">Logout</button>
        </div>
        <div id="login-display">
          <button id="login-btn" class="btn btn-primary">Login with GitHub</button>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <div id="app-pages">
      <!-- Login Page -->
      <section id="login-page" class="app-page">
        <div class="login-container">
          <div class="logo-container">
            <img src="images/logo.svg" alt="Gitty-Gitty-Git-Er Logo" class="logo">
          </div>
          <h2>Welcome to Gitty-Gitty-Git-Er</h2>
          <p>A comprehensive GitHub management tool</p>
          <button id="login-page-btn" class="btn btn-large btn-primary">
            <svg height="16" viewBox="0 0 16 16" width="16" class="github-icon">
              <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
            </svg>
            Login with GitHub
          </button>
          <p class="login-info">
            You'll need to authorize this app to access your GitHub repositories.
            Only the necessary permissions will be requested.
          </p>
        </div>
      </section>

      <!-- Dashboard Page -->
      <section id="dashboard-page" class="app-page hidden">
        <h2>Dashboard</h2>
        <div class="dashboard-grid">
          <div class="card">
            <h3>My Repositories</h3>
            <div class="card-content" id="dashboard-repos">
              <p class="loading">Loading repositories...</p>
            </div>
            <a href="#" class="card-action" data-page="repositories">View All Repositories</a>
          </div>
          
          <div class="card">
            <h3>Recent Pull Requests</h3>
            <div class="card-content" id="dashboard-prs">
              <p class="loading">Loading pull requests...</p>
            </div>
            <a href="#" class="card-action" data-page="prs">View All Pull Requests</a>
          </div>

          <div class="card">
            <h3>Quick Actions</h3>
            <div class="card-content">
              <button id="new-repo-btn" class="btn btn-block">New Repository</button>
              <button id="clone-repo-btn" class="btn btn-block">Clone Repository</button>
              <button id="create-pr-btn" class="btn btn-block">Create Pull Request</button>
            </div>
          </div>

          <div class="card">
            <h3>Status</h3>
            <div class="card-content" id="dashboard-status">
              <div class="status-item">
                <span class="status-label">GitHub API:</span>
                <span class="status-value" id="github-status">Checking...</span>
              </div>
              <div class="status-item">
                <span class="status-label">Connection:</span>
                <span class="status-value" id="connection-status">Online</span>
              </div>
              <div class="status-item">
                <span class="status-label">Token Expires:</span>
                <span class="status-value" id="token-expiry">Unknown</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Repositories Page -->
      <section id="repositories-page" class="app-page hidden">
        <div class="page-header">
          <h2>Repositories</h2>
          <button id="create-repository-btn" class="btn btn-primary">
            <i class="material-icons">add</i> New Repository
          </button>
        </div>
        
        <div class="search-filter-container">
          <div class="search-box">
            <input type="text" id="repo-search" placeholder="Search repositories...">
            <i class="material-icons">search</i>
          </div>
          <div class="filter-options">
            <select id="repo-type-filter">
              <option value="all">All</option>
              <option value="owner">Owner</option>
              <option value="member">Member</option>
              <option value="public">Public</option>
              <option value="private">Private</option>
            </select>
            <select id="repo-sort">
              <option value="updated">Last Updated</option>
              <option value="created">Created</option>
              <option value="pushed">Last Pushed</option>
              <option value="full_name">Name</option>
            </select>
          </div>
        </div>
        
        <div id="repositories-list" class="repositories-grid">
          <p class="loading">Loading repositories...</p>
        </div>
      </section>

      <!-- Code Page -->
      <section id="code-page" class="app-page hidden">
        <h2>Code Explorer</h2>
        <div class="repo-selector">
          <select id="code-repo-select">
            <option value="">Select a repository</option>
          </select>
          <select id="code-branch-select" disabled>
            <option value="">Select a branch</option>
          </select>
        </div>
        
        <div class="code-explorer">
          <div class="file-tree-pane">
            <h3>Files</h3>
            <div id="file-tree" class="file-tree">
              <p class="placeholder">Select a repository and branch</p>
            </div>
          </div>
          <div class="code-content-pane">
            <div class="code-header">
              <h3 id="current-file-path">No file selected</h3>
              <div class="code-actions">
                <button id="edit-file-btn" class="btn btn-small" disabled>Edit</button>
                <button id="download-file-btn" class="btn btn-small" disabled>Download</button>
              </div>
            </div>
            <div id="code-display" class="code-display">
              <p class="placeholder">Select a file to view its contents</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Pull Requests Page -->
      <section id="prs-page" class="app-page hidden">
        <div class="page-header">
          <h2>Pull Requests</h2>
          <button id="create-pr-page-btn" class="btn btn-primary">
            <i class="material-icons">add</i> New Pull Request
          </button>
        </div>
        
        <div class="search-filter-container">
          <div class="search-box">
            <input type="text" id="pr-search" placeholder="Search pull requests...">
            <i class="material-icons">search</i>
          </div>
          <div class="filter-options">
            <select id="pr-state-filter">
              <option value="open">Open</option>
              <option value="closed">Closed</option>
              <option value="all">All</option>
            </select>
            <select id="pr-repo-filter">
              <option value="all">All Repositories</option>
            </select>
          </div>
        </div>
        
        <div id="pr-list" class="pr-list">
          <p class="loading">Loading pull requests...</p>
        </div>
      </section>

      <!-- Settings Page -->
      <section id="settings-page" class="app-page hidden">
        <h2>Settings</h2>
        <div class="settings-container">
          <div class="settings-card">
            <h3>Application Settings</h3>
            
            <div class="setting-item">
              <label for="theme-select">Theme</label>
              <select id="theme-select">
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="system">System Default</option>
              </select>
            </div>
            
            <div class="setting-item">
              <label for="default-repo">Default Repository</label>
              <select id="default-repo">
                <option value="">None</option>
              </select>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="offline-mode"> Enable Offline Mode
              </label>
              <p class="setting-description">Cache repositories and files for offline access</p>
            </div>
            
            <div class="setting-item">
              <label>
                <input type="checkbox" id="notifications-enabled" checked> Enable Notifications
              </label>
            </div>
          </div>
          
          <div class="settings-card">
            <h3>GitHub Connection</h3>
            
            <div class="setting-item">
              <div class="connection-status">
                <span>Status:</span>
                <span id="github-connection-status" class="status-badge">Connected</span>
              </div>
              <button id="reconnect-github" class="btn">Reconnect</button>
            </div>
            
            <div class="setting-item">
              <label>OAuth Scopes</label>
              <div id="oauth-scopes" class="scopes-list">
                <p class="loading">Loading permission scopes...</p>
              </div>
            </div>
            
            <div class="setting-item">
              <button id="revoke-access-btn" class="btn btn-danger">Revoke Access</button>
              <p class="setting-description">This will revoke the application's access to your GitHub account</p>
            </div>
          </div>
          
          <div class="settings-card">
            <h3>About</h3>
            <div class="about-info">
              <p><strong>Gitty-Gitty-Git-Er</strong> v1.0.0</p>
              <p>A comprehensive GitHub management tool</p>
              <p><a href="https://github.com/940smiley/gitty-gitty-git-er" target="_blank">View on GitHub</a></p>
              <p>© 2025 All Rights Reserved</p>
            </div>

            <div class="setting-item">
              <button id="check-updates-btn" class="btn">Check for Updates</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Modals -->
      <div id="new-repo-modal" class="modal hidden">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Create New Repository</h3>
            <button class="close-modal">&times;</button>
          </div>
          <div class="modal-body">
            <form id="new-repo-form">
              <div class="form-group">
                <label for="repo-name">Repository Name</label>
                <input type="text" id="repo-name" required>
              </div>
              <div class="form-group">
                <label for="repo-description">Description (Optional)</label>
                <input type="text" id="repo-description">
              </div>
              <div class="form-group">
                <label>
                  <input type="radio" name="repo-visibility" value="public" checked> Public
                </label>
                <label>
                  <input type="radio" name="repo-visibility" value="private"> Private
                </label>
              </div>
              <div class="form-group">
                <label>
                  <input type="checkbox" id="initialize-readme" checked> Initialize with README
                </label>
              </div>
              <div class="form-group">
                <label for="gitignore-template">Add .gitignore (Optional)</label>
                <select id="gitignore-template">
                  <option value="">None</option>
                  <option value="Node">Node</option>
                  <option value="Python">Python</option>
                  <option value="Java">Java</option>
                  <option value="Go">Go</option>
                  <option value="Ruby">Ruby</option>
                </select>
              </div>
              <div class="form-group">
                <label for="license-template">Add license (Optional)</label>
                <select id="license-template">
                  <option value="">None</option>
                  <option value="mit">MIT License</option>
                  <option value="apache-2.0">Apache License 2.0</option>
                  <option value="gpl-3.0">GNU GPLv3</option>
                  <option value="bsd-2-clause">BSD 2-Clause</option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button class="btn cancel-modal">Cancel</button>
            <button id="create-repo-submit" class="btn btn-primary">Create Repository</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>Gitty-Gitty-Git-Er | <span id="connection-indicator">Online</span></p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/app.js" type="module"></script>
  <script>
    // Register service worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(registration => {
            console.log('Service Worker registered with scope:', registration.scope);
          })
          .catch(error => {
            console.error('Service Worker registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>
